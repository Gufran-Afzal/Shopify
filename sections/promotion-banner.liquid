{%- liquid
  assign section_prefix_class = 'promotion-banners'
-%}
{%- style -%}
  .banner-card{
    margin: 0;
    height: 100%;
    overflow: hidden;
    position: relative;
  }

  .banner-card .heading-head{
    background: var(--section-background-color);
    color: var(--section-foreground-color);
    padding: 17px 33px;
  }

  .banner-caption{
    border-radius: var(--section-radius);
    padding: 16px;
    position: absolute;
    bottom: 40px;
    margin: 0 26px;
    max-height: 60%;
    overflow-y: auto;
    overflow-x: hidden;
  }

  .banner-image{
    position: relative;
  }

  a.banner-card{
    --focus-outline-offset: 1px;
    display: block;
  }

  .banner-card_content-position{
    position: absolute;
    max-width: 80%;
    max-height: 80%;
    z-index: 1;
    overflow-y: auto;
  }

  .--top-left{
    top: 0;
    left: 0;
  }

  .--top-right{
    top: 0;
    right: 0;
  }

  .--bottom-left{
    left: 0;
    bottom: 0;
  }

  .--bottom-right{
    right: 0;
    bottom: 0;
  }

  .--bottom-center{
    text-align: center;
    bottom: 0;
    left: 130px;
    right: 130px;
    max-width: none;
  }

  .--top-center{
    text-align: center;
    top: 0;
    left: 130px;
    right: 130px;
    max-width: none;
  }

  .--center{
    text-align: center;
    top: 50%;
    transform: translateY(-50%);
    left: 130px;
    right: 130px;
    max-width: none;
  }

  .promotion-banners{
    --top-radius: 15px;
    --bottom-radius: 15px;
  }

  .promotion-banners_wrapper{
    --padding-top: calc(var(--section-padding-top)/100*70);
    --padding-bottom: calc(var(--section-padding-bottom)/100*70);
    padding-top: var(--padding-top);
    padding-bottom: var(--padding-bottom);
  }

  @media (min-width: 768px) {
    .promotion-banners_wrapper{
      --padding-top: calc(var(--section-padding-top)/100*85);
      --padding-bottom: calc(var(--section-padding-bottom)/100*85);
    }
  }

  @media (min-width: 1200px){
    .promotion-banners{
      --top-radius: var(--section-top-radius);
      --bottom-radius: var(--section-bottom-radius);
    }
    
    .promotion-banners_wrapper{
      --padding-top: var(--section-padding-top);    
      --padding-bottom: var(--section-padding-bottom);
    }
  }
{%- endstyle -%}
<div class="{{ section_prefix_class }} {{ section_prefix_class }}-{{ section.id }}" style="--section-padding-top: {{ section.settings.section_top_padding }}px; --section-padding-bottom: {{ section.settings.section_bottom_padding }}px; --desktop-row-height: {{ section.settings.desktop_row_height }}px; --mobile-row-height: {{ section.settings.mobile_row_height }}px;">
  <div class="container">
    <div class="{{ section_prefix_class }}_wrapper">
      <div class="collage-grid">
        {%- for block in section.blocks -%}
          {%- liquid
            capture loading_attr
              unless section.index != 1
                unless forloop.index != 1
                  echo 'eager'
                  else
                    echo 'lazy'
                endunless
                else
                  echo 'lazy'
              endunless
            endcapture
          -%}
          <div
            class="{{ section.id }}-{{ block.id }} collage-grid_col"
            style="--block-row-span: {{ block.settings.rows }}; --block-column-span: {{ block.settings.columns }};"
            {{ block.shopify_attributes }}
          >
            {%- render 'banner-card', figure: block, index: forloop.index, loading_attr: loading_attr -%}
          </div>
        {%- endfor -%}
      </div>
    </div>
  </div>
</div>
{% schema %}
{
  "name": "t:sections.promotion_banners.name",
  "tag": "section",
  "disabled_on": {
    "groups": [
      "header",
      "footer",
      "custom.overlay"
    ]
  },
  "settings": [
    {
      "type": "header",
      "content": "t:grid.content"
    },
    {
      "type": "range",
      "id": "desktop_row_height",
      "label": "t:sections.promotion_banners.settings.d_row_height.label",
      "min": 200,
      "max": 580,
      "step": 5,
      "default": 300,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "mobile_row_height",
      "label": "t:sections.promotion_banners.settings.m_row_height.label",
      "min": 150,
      "max": 300,
      "step": 10,
      "default": 200,
      "unit": "px"
    },
    {
      "type": "header",
      "content": "t:spacing.content"
    },
    {
      "type": "range",
      "id": "section_top_padding",
      "label": "t:spacing.settings.top.label",
      "min": 0,
      "max": 100,
      "step": 1,
      "default": 36,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "section_bottom_padding",
      "label": "t:spacing.settings.bottom.label",
      "min": 0,
      "max": 100,
      "step": 1,
      "default": 36,
      "unit": "px"
    }
  ],
  "blocks": [
    {
      "type": "banner",
      "name": "t:sections.promotion_banners.blocks.banner.name",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "t:image.label",
          "info": "t:sections.promotion_banners.blocks.information.settings.image.info"
        },
        {
          "type": "text",
          "id": "block_caption",
          "label": "t:caption.label",
          "default": "Caption"
        },
        {
          "type": "select",
          "id": "block_caption_size",
          "label": "t:sizes.caption.label",
          "options": [
            {
              "value": "text-size--small",
              "label": "t:sizes.text.options.opt_1.label"
            },
            {
              "value": "text-size--medium",
              "label": "t:sizes.text.options.opt_2.label"
            },
            {
              "value": "text-size--large",
              "label": "t:sizes.text.options.opt_3.label"
            }
          ],
          "default": "text-size--small"
        },
        {
          "type": "select",
          "id": "block_caption_weight",
          "label": "t:weight.caption.label",
          "options": [
            {
              "value": "--fw-bold",
              "label": "t:weight.heading.options.opt_1.label"
            },
            {
              "value": "--fw-semi-bold",
              "label": "t:weight.heading.options.opt_5.label"
            },
            {
              "value": "--fw-medium",
              "label": "t:weight.heading.options.opt_2.label"
            },
            {
              "value": "--fw-normal",
              "label": "t:weight.heading.options.opt_3.label"
            }
          ],
          "default": "--fw-medium"
        },
        {
          "type": "text",
          "id": "block_heading",
          "label": "t:heading.label",
          "default": "Heading"
        },
        {
          "type": "select",
          "id": "block_heading_size",
          "label": "t:sizes.heading.label",
          "options": [
            {
              "value": "h2",
              "label": "t:sizes.heading.options.opt_2.label"
            },
            {
              "value": "h3",
              "label": "t:sizes.heading.options.opt_3.label"
            },
            {
              "value": "h4",
              "label": "t:sizes.heading.options.opt_4.label"
            },
            {
              "value": "h5",
              "label": "t:sizes.heading.options.opt_5.label"
            }
          ],
          "default": "h3"
        },
        {
          "type": "select",
          "id": "block_heading_weight",
          "label": "t:weight.heading.label",
          "options": [
            {
              "value": "--fw-bold",
              "label": "t:weight.heading.options.opt_1.label"
            },
            {
              "value": "--fw-semi-bold",
              "label": "t:weight.heading.options.opt_5.label"
            },
            {
              "value": "--fw-medium",
              "label": "t:weight.heading.options.opt_2.label"
            },
            {
              "value": "--fw-normal",
              "label": "t:weight.heading.options.opt_3.label"
            }
          ],
          "default": "--fw-bold"
        },
        {
          "type": "select",
          "id": "content_position",
          "label": "t:alignments.content.label",
          "options": [
            {
              "value": "top_left",
              "label": "t:positions.options.top_left"
            },
            {
              "value": "top_right",
              "label": "t:positions.options.top_right"
            },
            {
              "value": "top_center",
              "label": "t:positions.options.top_center"
            },
            {
              "value": "center",
              "label": "t:positions.options.middle"
            },
            {
              "value": "bottom_left",
              "label": "t:positions.options.bottom_left"
            },
            {
              "value": "bottom_right",
              "label": "t:positions.options.bottom_right"
            },
            {
              "value": "bottom_center",
              "label": "t:positions.options.bottom_center"
            }
          ],
          "default": "bottom_left"
        },
        {
          "type": "url",
          "id": "link",
          "label": "t:settings_schema.buttons.settings.button.link.name"
        },
        {
          "type": "checkbox",
          "id": "open_new_window",
          "label": "t:target_blank.label",
          "default": false
        },
        {
          "type": "header",
          "content": "t:layout.content"
        },
        {
          "type": "range",
          "id": "columns",
          "label": "t:grid.desktop.columns.label",
          "min": 1,
          "max": 6,
          "step": 1,
          "default": 2
        },
        {
          "type": "range",
          "id": "rows",
          "label": "t:grid.desktop.rows.label",
          "min": 1,
          "max": 4,
          "step": 1,
          "default": 2
        },
        {
          "type": "color_scheme",
          "id": "block_color_scheme",
          "default": "scheme2",
          "label": "t:color_scheme.label"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "t:sections.promotion_banners.name",
      "blocks": [
        {
          "type": "banner",
          "settings": {
            "columns": 3,
            "rows": 2
          }
        },
        {
          "type": "banner",
          "settings": {
            "columns": 3,
            "rows": 1
          }
        },
        {
          "type": "banner",
          "settings": {
            "columns": 3,
            "rows": 1
          }
        }
      ]
    }
  ]
}
{% endschema %}